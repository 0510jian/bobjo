<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="fragments/layout">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>diary</title>

    <link rel="stylesheet" href="http://cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">
    <link rel="stylesheet" th:href="@{/static/css/diary/diary2.css?after}">
    <link rel="stylesheet" th:href="@{/static/css/fragments/footer.css?after}">
    <link rel="stylesheet" th:href="@{/static/css/fragments/acceptNavi2.css}">
    <!--
    ÌåùÏóÖÌïòÎÇòÏùò ÎßÅÌÅ¨Îäî d_seq1
    Î©îÏù∏ÌôîÎ©¥ÏóêÏÑú ÏÇ¨ÏßÑ d_thumb
    Î©îÏù∏ÌôîÎ©¥ÏóêÏÑú Ï†úÎ™© d_title
    Î©îÏù∏ÌôîÎ©¥ÏóêÏÑú Î≥∏Î¨∏ d_content
    Î≥∏Î¨∏ÏÇ¨ÏßÑÏùÄ d_picÏúºÎ°ú ÏûÑÏãúÏÑ§Ï†ï
    Î≥∏Î¨∏Ï†úÎ™©ÏùÄ temtitle
    Î≥∏Î¨∏ÎÇ¥Ïö©ÏùÄ temcontents -->

</head>
<body>
<th:block layout:fragment="content">
    <div class="main_container">
        <header>
            <th:block>
                <h1><img src="/static/img/logo.png" style="width: 110px; margin-left: -20px;"></h1>
            </th:block>
            <div><a href="/diary" style="color: #f07635;">ÏÑ±Ïû•ÏùºÍ∏∞</a></div>
            <div><a href="/diary/schedule">ÏùºÏ†ï</a></div>
            <div><a href="/diary/friend">ÏπúÍµ¨</a></div>
        </header>


        <script th:inline="javascript">
            /*<![CDATA[*/

            function leftFunction() {
                document.getElementById("animal3List").scrollLeft += 100;
            }

            function rightFunction() {
                document.getElementById("animal3List").scrollLeft -= 100;
            }

            window.onload = function() {
                animalBtnClick(-1);
            }


            function resetDiary() {
                document.getElementById("diaryBlocks").innerHTML = "";
            }

            function animalBtnClick(inputA3Seq) {
                resetDiary();

                /*[# th:each="diary : ${diaryList}"]*/
                    var a3Seq = /*[[${diary.a3Seq}]]*/;
                    var dSeq = /*[[${diary.dSeq}]]*/;
                    var dThumb = /*[[${diary.dThumb}]]*/;
                    var dTitle = /*[[${diary.dTitle}]]*/;
                    var dContent = /*[[${diary.dContent}]]*/;
                    var dDate = /*[[${diary.dDate}]]*/;
                    var dWeather = /*[[${diary.dWeather}]]*/;



                    if(dWeather == 0) {
                        dWeather = "‚òÄÔ∏èÎßëÏùå‚òÄÔ∏è";
                    } else if(dWeather == 1) {
                        dWeather = "üå•Ô∏èÌùêÎ¶ºüå•Ô∏è";
                    } else if(dWeather == 2) {
                        dWeather = "üåàÎπÑ‚òî";
                    } else {
                        dWeather = "‚òÉÔ∏èÎàà‚ùÑÔ∏è";
                    }

                    if(dThumb == null) {
                        dThumb = "/static/img/animal.png";
                    }

                    if (a3Seq == inputA3Seq || inputA3Seq == -1) {
                        var code = '<a href="#' + dSeq + '" class="btn">'
                        + '<img src="' + dThumb + '" id="d_thumb" alt="">'
                        + '<div id="d_title" name="dTitle" style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis">' + dTitle + '</div>'
                        + '<div id="d_content" style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis">' + dContent + '</div>'
                        + '</a>'
                        + '<div class="popup" id="' + dSeq + '">'
                        + '<div style="width:100%;">'
                        + '<div style="width:30px; height:30px; margin: auto; background: #3C6255; border-radius:20px; text-align: center;">'
                        + '<a href="#a" style="vertical-align: middle; line-height: 30px; color: white;">X</a>'
                        + '<br></div><br></div><p id="d_date">' + dDate + '   ' + dWeather + '</p>'
                        + '<div style="width:100%; text-align: center;">'
                        + '<br><img src="' + dThumb + '" id="d_pic" alt=""><br></div><p id="temtitle">' + dTitle + '</p>'
                        + '<p id="temcontents">' + dContent + '</p>'
                        + '<form action="/diary/' + dSeq + '" method="post">'
                        + '<input type="hidden" name="_method" value="delete">'
                        + '<input type="submit" class="btnDelete" value="ÏÇ≠Ï†ú"></form>'
                        + '</div><div class="dim"></div>';

                        document.getElementById("diaryBlocks").innerHTML = document.getElementById("diaryBlocks").innerHTML + code;
                    }
                /*[/]*/
            }
            /*]]>*/
        </script>

        <a href="/diary/write" id="plusButton" style="position: fixed; bottom: 90px; right: 50%; transform: translateX(220px);">
            <img src="/static/img/btn.png"></a>

        <section>
            <!-- Ï§ëÍ∞Ñ Î∞òÎ†§ÎèôÎ¨º Î≤ÑÌäº -->
            <div class="animal3">
                <button class="moveHorizontal" onclick="rightFunction()"><</button>
                <div class="animal3List" id="animal3List">
                    <th:block th:unless="${animal3List == null}">
                        <input type="hidden" id="animal3Cate" name="animal3Cate" value="-1">
                        <button type="button" class="clickButton" onclick="animalBtnClick(-1)">Í≥µÌÜµ</button>
                        <th:block th:if="${#lists.size(animal3List)} > 0" th:each="animal3:${animal3List}">
                            <button type="button" class="clickButton" th:text="${animal3.a3Nick}" th:value="${animal3.a3Seq}" onclick="animalBtnClick(this.value)"></button>
                        </th:block>
                    </th:block>
                </div>
                <button class="moveHorizontal" onclick="leftFunction()">></button>
            </div><br>

            <div id="diaryBlocks">
                <!--
                <th:block th:unless="${diaryList == null}">
                    <th:block th:if="${#lists.size(diaryList)} > 0" th:each="diary:${diaryList}" class="container">
                        <a href="#" th:attrappend="href=${diary.dSeq}" class="btn">
                            <img th:src="${diary.dThumb}" id="d_thumb" alt="">
                            <div id="d_title" name="dTitle" th:text="${diary.dTitle}" style='overflow:hidden;white-space:nowrap;text-overflow:ellipsis' >Ï†úÎ™© </div>
                            <div id="d_content" th:text="${diary.dContent}" style='overflow:hidden;white-space:nowrap;text-overflow:ellipsis'>ÎÇ¥Ïö©</div>
                        </a>

                        <div class="popup" th:id="${diary.dSeq}">
                            <div style="width: 100%;">
                                <div style="width: 30px; height: 30px; margin: auto; background: darkgreen; border-radius:20px; text-align: center;">
                                    <a href="#a" style="vertical-align: middle; line-height: 30px; color:white;">X</a><br>
                                </div>
                                <br>
                            </div>

                            <p id="d_date" th:text="${diary.dDate}">ÎÇ†Ïßú</p>
                            <div style="width:100%; text-align: center;">
                                <img th:unless="${diary.dThumb == null}" th:src="${diary.dThumb}" id="d_pic" alt=""><br>
                            </div>
                            <p id="temtitle" th:text="${diary.dTitle}">üå®Ô∏èÏ†úÎ™©</p>

                            <p id="temcontents" th:text="${diary.dContent}">ÎÇ¥Ïö©</p>
                            <form action="/community/freeboard/" th:attrappend="action=${board.bSeq}" method="post">
                                <input type="hidden" name="_method" value="delete">
                                <input type="submit" class="btnDelete" value="ÏÇ≠Ï†ú" th:if="${board.uSeq == user.uSeq}"/>
                            </form>
                        </div>
                        <div class="dim"></div>
                    </th:block>
                </th:block>
                -->

            </div>

        </section>


    </div>
</th:block>

<th:block layout:fragment="naviFragment">
    <navigator>
        <!-- ÏïåÎ¶ºÏ∞Ω Î≥¥Ïù¥Í≤å ÌïòÎäî Î≤ÑÌäº -->
        <button id="naviO" onclick="toBig()" style="display: block;box-shadow: 0 0 5px gray;"><img src="/static/img/walkmate.png" style="width:40px; margin-top:7px;"></button>
        <script>
            function toBig() {
                document.getElementById("float_container").style.display = 'block';
                document.getElementById("naviO").style.display = 'none';
            }
        </script>




        <!-- Î©îÏù∏ÌôîÎ©¥ ÏòÜ Ïò§Î•∏Ï™Ω ÌîåÎ°úÌåÖ Ï∞Ω -->
        <div class="float_container" id="float_container" style="display:none;">


            <div class="naviAlert">
                <th:block class="walkmateList" th:unless="${walkmateList == null}">
                    <th:block th:if="${#lists.size(walkmateList)} > 0" th:each="walkmate:${walkmateList}">
                        <h3>ÏÇ∞Ï±ÖÎ©îÏù¥Ìä∏ Ïã†Ï≤≠Ïù¥ ÏôîÏñ¥Ïöî!</h3>

                        <!-- Ïã†Ï≤≠ Ï¥ù Î™áÍ±¥ Ïù∏ÏßÄ ÎùÑÏö∞Îäî ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ -->
                        <sub>Ï¥ù <span th:text="${#lists.size(walkmateList)}"></span>Í∞ú</sub>


                        <!-- Ïã†Ï≤≠ ÌôîÎ©¥ Î∞òÎ≥µ -->
                        <th:block th:unless="${walkmate.proposeAlias == null or walkmate.proposeAlias == ''}">
                            <div class="alertSet">
                                <div class="naviInfo">
                                    <!-- th: Ïã†Ï≤≠ÌöåÏõêÎ≤àÌò∏ "w_propose" Î∞õÏïÑÏôÄÏÑú ÌöåÏõêÎ≤àÌò∏"u_seq"Î°ú ÎãâÎÑ§ÏûÑ Î∂àÎü¨Ïò§Í∏∞ -->
                                    <p id="naviA3_nick" th:text="${walkmate.proposeAlias}"><b>ÎãâÎÑ§ÏûÑ</b></p>
                                    <p id="naviCont">
                                        <span th:text="${walkmate.a3Nick}"></span>(<span th:text="${walkmate.a2Species}"></span>)<br>
                                        <span id="naviMessage" th:text="${walkmate.wmContent}">Î©îÏãúÏßÄ Î°úÎî© Ï§ë</span>

                                    </p>
                                    <!-- th: ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Î°ú Ìï¥Îãπ Í∞ùÏ≤¥ Ï†ëÍ∑º ÌõÑ, ÎãâÎÑ§ÏûÑ Îì±Îì± Î∂àÎü¨Ïò§Í≥†
                                         Î©îÏù¥Ìä∏ ÏÑ±ÏÇ¨Ïó¨Î∂Ä"w_res" ÌåêÎã® ÌõÑ ÏÇ∞Ï±ÖÎ©îÏù¥Ìä∏ Î≤àÌò∏"w_seq" Î∂ÄÏó¨ -->
                                </div>
                            </div>

                            <!-- Í±∞Ï†à, ÏàòÎùΩ Î≤ÑÌäº -->
                            <table class="naviButton" style="width:100%;">
                                <tr style="width:100%;">
                                    <td>
                                        <form action="/walkmate/refuse/" th:attrappend="action=${walkmate.wmSeq}" method="post">
                                            <input type="hidden" name="_method" value="delete">
                                            <input type="submit" class="btnRefuse" value="Í±∞Ï†à">
                                        </form>
                                    </td>
                                    <td>
                                        <form action="/walkmate/permit/" th:attrappend="action=${walkmate.wmSeq}" method="post">
                                            <input type="hidden" name="_method" value="put">
                                            <input type="submit" class="btnPermit" value="ÏàòÎùΩ">
                                        </form>
                                    </td>
                                </tr>
                            </table>

                        </th:block>
                    </th:block>

                    <th:block th:if="${#lists.size(walkmateList)} == 0">Î∞õÏùÄ ÏÇ∞Ï±ÖÎ©îÏù¥Ìä∏ Ïã†Ï≤≠Ïù¥ ÏóÜÏäµÎãàÎã§</th:block>
                </th:block>
            </div>

            <!-- ÏïåÎ¶ºÏ∞Ω Ïïà Î≥¥Ïù¥Í≤å ÌïòÎäî Î≤ÑÌäº -->
            <button id="naviX" onclick="toSmall()">x</button>
            <script>
                function toSmall() {
                    document.getElementById("float_container").style.display = 'none';
                    document.getElementById("naviO").style.display = 'block';
                }
            </script>

        </div>
    </navigator>
</th:block>

</body>
</html>